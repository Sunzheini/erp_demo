{% extends 'core/base.html' %}

{% block page_title %}
    Process Management
{% endblock %}

{#1. Nav----------------------------------------------------------------------#}

{#2. Header-------------------------------------------------------------------#}
    {% block page_name %}
        <header>
            <h1>
                Process Management
            </h1>
        </header>
    {% endblock %}

{% block page_content %}
{#3. Buttons------------------------------------------------------------------#}
    <div class="container" id="con1">
        <button
                class="card"
                onclick="location.href='{% url 'index' %}';"
        >
            <h2>< Back</h2>
            <p>
                Go back to the main menu
            </p>
        </button>

        <button class="card"></button>

        <button class="card" onclick="fShowHideProcessForm()">
            <h2>New Process</h2>
            <p>
                Show / Hide Form
            </p>
        </button>

        <button class="card" onclick="fShowHideProcessStepForm()">
            <h2>New Process Step</h2>
            <p>
                Show / Hide Form
            </p>
        </button>

{#4. Display------------------------------------------------------------------#}
    <div class="container" id="con2">
        <div class="card display">

    <div style="display: none;" id="process_form" >
    <form action="{% url 'process mng index' %}" method="post">
        <strong>1) Process Creation Form</strong>

        <table class="table-form">
             {{ process_form }}
        </table>

        {% csrf_token %}
        <button class="form_button" name="button1">add this process</button>
    </form>
    <br><hr><br>
    </div>

    <div style="display: none;" id="process_step_form" >
    <form action="{% url 'process mng index' %}" method="post">
        <strong>2) Process Step Creation Form</strong>

        <table class="table-form">
             {{ process_step_form }}
        </table>

        {% csrf_token %}
        <button class="form_button" name="button2">add this process step</button>
    </form>
    <br><hr><br>
    </div>


    <div>

         <table class="table-data">
      <thead>
        <tr>
          <th colspan="4">Process</th>
          <th colspan="7">Process Step</th>
        </tr>
        <tr>
          <th>Nr</th>
          <th>Name</th>
          <th>FC</th>
          <th>TL</th>
          <th>Number</th>
          <th>Type</th>
          <th>Name</th>
          <th>Documents</th>
          <th>Resp</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>

      <tbody>
        {% for list_item in process_info %}
                {% for i in list_item %}
                <tr>

                <td>{{ i.parent_process.number }}</td>
                <td>{{ i.parent_process.name }}</td>

                <td><a class="table-link" href="{% url 'create flowchart' pk=i.parent_process.pk %}">
                    <i class="fa-sharp fa-solid fa-florin-sign"></i>Flowchart</a></td>
                <td><a class="table-link" href="{% url 'create turtle' pk=i.parent_process.pk %}">
                    <i class="fa-sharp fa-solid fa-pizza-slice"></i>Turtle</a></td>

                <td>{{ i.number }}</td>
                <td>{{ i.type }}</td>
                <td>{{ i.name }}</td>

                <td>{{ i.get_related_documents }}</td>
                <td>{{ i.responsible.get_full_name }}</td>

                <td><a class="table-link" href="{% url 'edit process step' pk=i.pk slug=i.slug %}"><i class="fa-solid fa-pen-to-square"></i>
                    Edit</a></td>
                <td><a class="table-link" href="{% url 'delete process step' pk=i.pk slug=i.slug %}"><i class="fa-solid fa-trash"></i>
                    Delete</a></td>

                </tr>
                {% endfor %}

        {% endfor %}
      </tbody>

    </table>
    </div>

        </div>
    </div>

{% endblock %}
